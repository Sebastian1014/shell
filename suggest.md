# 开发 & 运维建议


### 背景

```
1.还记得部署合规生产环境，居然花了一个dev一天的时间去帮忙部署
2.上周部署klg-activity，居然也要2 ~ 3小时才能部署完
3.我认为这样的部署效率太低了
```


### 反思为什么效率这么低？

```
1.用参数方式启动，增加了运维部署的复杂度，运维需要了解每个项目的要用到什么参数，然后逐个逐个填好，才能正常启动
2.项目的技术栈参差不齐，对于运维来说，不能有一个统一方法去处理，甚至是一个项目一个处理方案
```


### 解决方案

```
针对上面的问题，我想到了一个解决方案，可以让运维高效发布项目：

1.不采用参数的方式启动服务器，而是采用node production.js的方式启动，约定启动文件的文件是环境变量，一个环境一份配置文件

下面是必要的目录结构
klg-xxxx
|--app
|--bin
|   └──cli
|       └──xxx.js 
|   └──pm2 
|		└──production.json
|		└──dev.json
|		└──test.json
|--config
|	└──production.js
|	└──dev.js
|	└──test.js
|--production.js
|--dev.js
|--test.js

说明：
a) 
```
